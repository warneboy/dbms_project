<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Signup | Commercial Platform</title>
<style>
body{background:#16315c;font-family:Arial,sans-serif;display:flex;justify-content:center;align-items:center;height:100vh}
.container{background:#fff;padding:30px;width:400px;border-radius:10px;box-shadow:0 10px 25px rgba(0,0,0,0.2)}
h2{text-align:center;margin-bottom:20px}
.input-group{margin-bottom:15px}
.input-group label{display:block;font-size:14px;margin-bottom:5px}
.input-group input, .input-group select{width:100%;padding:8px}
.signup-btn{width:100%;padding:10px;background:#1e3c72;color:#fff;border:none;cursor:pointer;font-size:16px}
.signup-btn:hover{background:#16315c}
.error{color:red;text-align:center;margin-bottom:10px}
</style>
</head>
<body>
<div class="container">
<h2>Signup</h2>
<p id="error" class="error"></p>
<form id="signupForm" enctype="multipart/form-data">
<div class="input-group">
<label>Role</label>
<select id="role" name="role" required>
<option value="customer">Customer</option>
<option value="shopkeeper">Shopkeeper</option>
</select>
</div>
<div class="input-group">
<label>Full Name</label>
<input type="text" id="full_name" name="full_name" required>
</div>
<div class="input-group">
<label>Email</label>
<input type="email" id="email" name="email" required>
</div>
<div class="input-group">
<label>Password</label>
<input type="password" id="password" name="password" required>
</div>
<div class="input-group customer-only">
<label>Delivery Address</label>
<input type="text" id="delivery_address" name="delivery_address">
</div>
<div class="input-group shopkeeper-only">
<label>Shop Name</label>
<input type="text" id="shop_name" name="shop_name">
</div>
<div class="input-group shopkeeper-only">
<label>Shop Address</label>
<input type="text" id="shop_address" name="shop_address">
</div>
<div class="input-group shopkeeper-only">
<label>Registration No</label>
<input type="text" id="registration_no" name="registration_no">
</div>
<div class="input-group">
<label>Citizenship Image</label>
<input type="file" id="citizenship" name="citizenship" required>
</div>
<button type="submit" class="signup-btn">Signup</button>
</form>
<script>
const roleSelect=document.getElementById("role");
const customerFields=document.querySelectorAll(".customer-only");
const shopFields=document.querySelectorAll(".shopkeeper-only");
function toggleFields(){if(roleSelect.value==="customer"){customerFields.forEach(f=>f.style.display="block");shopFields.forEach(f=>f.style.display="none")}else{shopFields.forEach(f=>f.style.display="block");customerFields.forEach(f=>f.style.display="none")}}toggleFields();roleSelect.addEventListener("change",toggleFields);
document.getElementById("signupForm").addEventListener("submit",async function(e){
e.preventDefault();
const formData=new FormData(this);
const error=document.getElementById("error");error.textContent="";
try{
const res=await fetch("/signup",{method:"POST",body:formData});
const data=await res.json();
if(!res.ok){error.textContent=data.message;return;}
alert("Account created successfully");window.location.href="login_page.html";
}catch(err){error.textContent="Server error. Try again.";}
});
</script>
</body>
</html>
